{template 'header'} 


      <section id="content">
        <section class="vbox">
          <section class="scrollable padder">
            <ul class="breadcrumb no-border no-radius b-b b-light pull-in">
              <li><a href="{php echo $this->createWebUrl("index")}"><i class="fa fa-home"></i>首页</a></li>
              <li class="active">数据统计</li>          
            </ul> 
<ul class="nav nav-tabs">
	<li {if $op == 'orderstatistics' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'orderstatistics'))}">订单统计</a></li>
	<li {if $op == 'red'}class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'red'))}">红包发送记录</a></li>
	<li {if $op == 'salereport'}class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'salereport'))}">零售生意报告</a></li>
	<li {if $op == 'saledetails' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'saledetails'))}">商品销售明细</a></li>
	<li {if $op == 'saletargets' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'saletargets'))}">销售指标分析</a></li>
	<li {if $op == 'productsaleranking' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'productsaleranking'))}">商品销售排行</a></li>
<li {if $op == 'productsalestatistics'}class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'productsalestatistics'))}">商品访问与购买比</a></li>
<li {if $op == 'memberranking' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'memberranking'))}">会员消费排行</a></li>
<li {if $op == 'fansrange' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'fansrange'))}">代理粉丝排行</a></li>
<li {if $op == 'userincreasestatistics'&&$usertype=='user' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'userincreasestatistics'))}">会员增长统计</a></li>
<li {if $op == 'userincreasestatistics'&&$usertype=='agent' }class="active"{/if}><a href="{php echo $this->createWebUrl('statistics', array('op' => 'userincreasestatistics','usertype'=>'agent'))}">代理增长统计</a></li>

</ul>
<script type="text/javascript" src="{MODULE_URL}/resource/script/jquery.js"></script>
<script type="text/javascript" src="{MODULE_URL}/resource/components/highcharts/highcharts.js"></script>
<div class="main">
				<form action="">
                <input type="hidden" name="a" value="entry" />
				<input type="hidden" name="c" value="site" />
				<input type="hidden" name="m" value="mihua_mall" />
				<input type="hidden" name="do" value="statistics" />
				<input type="hidden" name="op" value="userincreasestatistics" />
				<input type="hidden" name="do" value="statistics" />
				<input type="hidden" name="usertype"  value="{$usertype}" />
<script type="text/javascript">
$(function () {
    $('#container').highcharts({
    	 credits: {
          enabled:false
				},
        chart: {
            type: 'column'
        },
        title: {
            text: '最近7天{php echo $usertype=='agent'?"代理":"会员"}增长值'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: ''
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: '{point.y}人</b>'
        },
        series: [{
            name: 'Population',  
             color: 'rgba(126,86,134,.9)',
            data: [
        		{php $index=0}
            	{loop $chartdata1 $item}
                ['{$item['dates']}', {$item['counts']}],	
          {php $index++}
                	{/loop}
            ],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                format: '{point.y}', // one decimal
                y: 10, // 10 pixels down from the top
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
});
		</script>


<script type="text/javascript">
$(function () {
	
    $('#container2').highcharts({
    		credits: {
          enabled:false
				},
        chart: {
            type: 'column'
        },
        title: {
            text: '按月查看{php echo $usertype=='agent'?"代理":"会员"}增长( {$dropMonthForYaer}年{$selectmonthSale}月 )'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: ''
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: '{point.y}人</b>'
        },
        series: [{
            name: 'Population',  
             color: 'rgba(248,161,63,1)',
            data: [
        		{php $index=0}
            	{loop $chartdata2 $item}
                ['{$item['dates']}', {$item['counts']}],	
          {php $index++}
                	{/loop}
            ],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                format: '{point.y}', // one decimal
                y: 10, // 10 pixels down from the top
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
});
		</script>
<script type="text/javascript">
$(function () {
    $('#container3').highcharts({
    		 credits: {
          enabled:false
				},
        chart: {
            type: 'column'
        },
        title: {
            text: '按年查看{php echo $usertype=='agent'?"代理":"会员"}增长( {$dropMonthForYaer2}年 )'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            type: 'category',
            labels: {
                rotation: -45,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: ''
            }
        },
        legend: {
            enabled: false
        },
        tooltip: {
            pointFormat: '{point.y}人</b>'
        },
        series: [{
            name: 'Population',  
             color: 'rgba(165,170,217,1)',
            data: [
        		{php $index=0}
            	{loop $chartdata3 $item}
                ['{$item['dates']}', {$item['counts']}],	
          {php $index++}
                	{/loop}
            ],
            dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                format: '{point.y}', // one decimal
                y: 10, // 10 pixels down from the top
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        }]
    });
});
		</script>
		
<div id="container" style="min-width: 300px; height: 400px; margin: 0 auto"></div>
<br/><br/>
<div style="padding:10px 10px 0 0; width:auto;">
		&nbsp;&nbsp;按月统计&nbsp;&nbsp;&nbsp;
					<select name="dropMonthForYaer" class="span2" >
		{loop $years $v}
	<option value="{$v['year']}"  {if $v['checked'] == 1}selected="selected"{/if}>{$v['year']}</option>
			{/loop}
</select>
年&nbsp;&nbsp;				
<select name="selectmonthSale" class="span1">	
	<option value="1" {if $selectmonthSale == 1 }selected="selected" {/if}>1</option>
	<option value="2" {if $selectmonthSale == 2 }selected="selected" {/if}>2</option>
	<option value="3" {if $selectmonthSale == 3 }selected="selected" {/if}>3</option>
	<option value="4" {if $selectmonthSale == 4 }selected="selected" {/if}>4</option>
	<option value="5" {if $selectmonthSale == 5 }selected="selected" {/if}>5</option>
	<option value="6" {if $selectmonthSale == 6 }selected="selected" {/if}>6</option>
	<option value="7" {if $selectmonthSale == 7 }selected="selected" {/if}>7</option>
	<option value="8" {if $selectmonthSale == 8 }selected="selected" {/if}>8</option>
	<option value="9" {if $selectmonthSale == 9 }selected="selected" {/if}>9</option>
	<option value="10" {if $selectmonthSale == 10 }selected="selected" {/if}>10</option>
	<option value="11" {if $selectmonthSale == 11 }selected="selected" {/if}>11</option>
	<option value="12" {if $selectmonthSale == 12 }selected="selected" {/if}>12</option>

</select>月	<input type="submit" name="" value="查询" class="btn btn-primary">
	</div>
<div id="container2" style="min-width: 300px; height: 400px; margin: 0 auto"></div>
<br/><br/>
<div style="padding:10px 10px 0 0; width:auto;">
		&nbsp;&nbsp;按月统计&nbsp;&nbsp;&nbsp;
					<select name="dropMonthForYaer2" class="span2" >
		{loop $years2 $v}
	<option value="{$v['year']}"  {if $v['checked'] == 1}selected="selected"{/if}>{$v['year']}</option>
			{/loop}
</select>
								年	<input type="submit" name="" value="查询" class="btn btn-primary">
	</div>
<div id="container3" style="min-width: 300px; height: 400px; margin: 0 auto"></div>
</div></form>

