<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="../../../addons/{$module_name}/images/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="../../../addons/{$module_name}/images/layuiadmin/style/admin.css" media="all">
    <link rel="stylesheet" href="../../../addons/{$module_name}/images/css/main.css" media="all">
    <script src="../../../../../../../../下载/layuiAdmin.pack/layuiAdmin.std-v1.1.0/dist/layuiadmin/lib/index.js"></script>
</head>
<body>

<style>
    .status-tr {
        height: 58px;
    }
    .status-td {
        width: 33%;
    }
    /*.table-item div, .table-item {*/
        /*width: 100% !important;*/
    /*}*/
</style>

<div class="layui-fluid">

    {if $sign == 1}
<!--    <blockquote style="letter-spacing: 1px;background-color: #fff; color: red" class="layui-elem-quote">系统未安装redis，或php未安装redis扩展，-->
<!--        为了更好的使用系统，请安装redis或者redis扩展。</blockquote>-->
    {/if}
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-row layui-col-space15">

                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">员工状态</div>
                        <div class="layui-card-body">

                            <div class="layui-carousel layadmin-carousel layadmin-backlog">
                                <div carousel-item>
                                    <ul class="layui-row layui-col-space10">
                                        <li class="layui-col-xs6">
                                            <a lay-href="{$usersList}" class="layadmin-backlog-body">
                                                <h3>已开员工名片</h3>
                                                <p><cite>{$users_count}</cite></p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs6">
                                            <a lay-href="{$usersList}" class="layadmin-backlog-body">
                                                <h3>可开通名片</h3>
                                                <p><cite>{$users_count}/{$card_number}</cite></p>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs12" style="text-align: center">
                                            <a lay-href="{$usersList}" class="layadmin-backlog-body">
                                                <p>
                                                    <cite>
                                                        <i class="layui-icon layui-icon-add-1" style="font-size: 35px;margin-top: 50px;"></i>
                                                    </cite>
                                                </p>
                                                <h3 style="padding: 0">添加员工名片</h3>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">账户状态</div>
                        <div class="layui-card-body layui-text">
                            <table class="layui-table">
                                <colgroup>
                                    <col width="100">
                                    <col>
                                </colgroup>
                                <tbody>
                                <tr class="status-tr">
                                    <td class="status-td">已使用天数</td>
                                    <td>
                                        <a lay-href="javascript:;" class="layadmin-backlog-body">
                                            <h3></h3>
                                            <p style="display: inline-block"><cite>{$users_days}</cite><cite style="font-size: 14px;color: #999999">天</cite></p>
                                            <p style="float: right;margin-top: 6px;color: #999999">{$create_date}</p>
                                        </a>
                                    </td>
                                </tr>
                                <tr class="status-tr">
                                    <td class="status-td">剩余可用天数</td>
                                    <td>
                                        <a lay-href="javascript:;" class="layadmin-backlog-body">
                                            <h3></h3>
                                            <p style="display: inline-block"><cite>{$left_days}</cite><cite style="font-size: 14px;color: #999999">天</cite></p>
                                            <p style="float: right;margin-top: 6px;color: #999999">{$left_date}</p>
                                        </a>
                                    </td>
                                </tr>
                                <tr class="status-tr">
                                    <td class="status-td">获客人数</td>
                                    <td>
                                        <a lay-href="{$usersList}" class="layadmin-backlog-body">
                                            <h3></h3>
                                            <p style="display: inline-block"><cite>{$clients_count}</cite><cite style="font-size: 14px;color: #999999">人</cite></p>
                                        </a>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">快捷方式</div>
                        <div class="layui-card-body">

                            <div class="layui-carousel layadmin-carousel layadmin-shortcut">
                                <div carousel-item>

                                    <ul class="layui-row layui-col-space10">

                                        <li class="layui-col-xs3">
                                            <a lay-href="{$companyEdit}">
                                                <i class="layui-icon layui-icon-console"></i>
                                                <cite>添加公司</cite>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs3">
                                            <a lay-href="{$usersList}">
                                                <i class="layui-icon layui-icon-chart"></i>
                                                <cite>添加名片</cite>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs3">
                                            <a lay-href="{$addGoods}">
                                                <i class="layui-icon layui-icon-template-1"></i>
                                                <cite>添加商品</cite>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs3">
                                            <a lay-href="{$goodsList}">
                                                <i class="layui-icon layui-icon-chat"></i>
                                                <cite>添加拼团</cite>
                                            </a>
                                        </li>

                                        <li class="layui-col-xs3">
                                            <a lay-href="{$modularList}">
                                                <i class="layui-icon layui-icon-find-fill"></i>
                                                <cite>官网管理</cite>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs3">
                                            <a lay-href="{$staffExplain}">
                                                <i class="layui-icon layui-icon-survey"></i>
                                                <cite>员工雷达</cite>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs3">
                                            <a lay-href="{$bossExplain}">
                                                <i class="layui-icon layui-icon-user"></i>
                                                <cite>BOSS雷达</cite>
                                            </a>
                                        </li>
                                        <li class="layui-col-xs3">
                                            <a lay-href="{$config}">
                                                <i class="layui-icon layui-icon-set"></i>
                                                <cite>修改授权</cite>
                                            </a>
                                        </li>

                                    </ul>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="layui-col-md8">
                    <div class="layui-card">
                        <div class="layui-card-header">数据概览</div>
                        <div class="layui-card-body" style="height: 420px !important;">



                            <div class="layui-carousel layadmin-carousel layadmin-dataview" data-anim="fade" lay-filter="LAY-index-dataview">
                                <div carousel-item style="height: 380px !important;">

                                    <div class="table-item" style="height: 380px !important;width: 100%">
                                        <div style="text-align: center">
                                            <button class="layui-btn layui-btn-primary table_new_user_7">近7天</button>
                                            <button class="layui-btn layui-btn-primary table_new_user_15">近15天</button>
                                            <button class="layui-btn layui-btn-primary table_new_user_30">近30天</button>
                                        </div>
                                        <div id="table_new_user" style="height: 350px !important"></div>
                                    </div>

                                    <div class="table-item" style="height: 380px !important;width: 100%">
                                        <div style="text-align: center">
                                            <button class="layui-btn layui-btn-primary table_message_user_7">近7天</button>
                                            <button class="layui-btn layui-btn-primary table_message_user_15">近15天</button>
                                            <button class="layui-btn layui-btn-primary table_message_user_30">近30天</button>
                                        </div>
                                        <div id="table_message_user" style="height: 350px !important"></div>
                                    </div>

                                    <div class="table-item" id="table_int_user" style="height: 380px !important;"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="layui-col-md4">
                    <div class="layui-card">
                        <div class="layui-card-header">员工能力值</div>
                        <div class="layui-card-body" style="height: 420px !important;">

                            <div class="layui-carousel layadmin-carousel layadmin-dataview" data-anim="fade" lay-filter="LAY-index-dataview">
                                <div carousel-item style="height: 420px !important;">
                                    <div class="table-item" id="table_user_power" style="height: 420px !important;"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>



{template 'common/footer'}

<style>
    .friend-link{
        text-align: center;
    }
    .copyright{
        text-align: center;
        padding-bottom: 20px;
    }
</style>



<script src="../../../addons/{$module_name}/images/layuiadmin/layui/layui.js"></script>
<script src="../../../addons/{$module_name}/images/js/jquery.min.js"></script>
<script src="../../../addons/{$module_name}/images/js/main.js"></script>
<script src="../../../addons/{$module_name}/images/js/echarts.min.js"></script>
<script>
    layui.config({
        base: '../../../addons/{$module_name}/images/layuiadmin/' //静态资源所在路径
    }).extend({
        index: 'lib/index' //主入口模块
    }).use(['index', 'console']);
    layui.use(['layer'], function () {
        var layer = layui.layer
    });

    var width = $(".table-item").css('width');
    $("#table_new_user").width(width);
    $("#table_new_user").find('div').width(width);
    $("#table_message_user").width(width);
    $("#table_message_user").find('div').width(width);
    $("#table_int_user").width(width);
    $("#table_int_user").find('div').width(width);

    var width = $("#table_user_power").css('width');
    $("#table_user_power").width(width);
    $("#table_user_power").find('div').width(width);

</script>

<script>
    $(function () {

        var data_new = {$data_new};

        var new_user_horizontal = [];
        var new_user_vertical   = [];

        for (var i = 0; i < data_new.length; i++)
        {
            new_user_horizontal.push(data_new[i].date);
            new_user_vertical.push(data_new[i].number);
        }

        var myChart = echarts.init(document.getElementById('table_new_user'), 'light');

        var option = {
            title: {
                text: '新增用户数量'
            },
            tooltip : {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    label: {
                        backgroundColor: '#6a7985'
                    }
                }
            },
            xAxis: {
                type: 'category',
                // boundaryGap: false,
                data: new_user_horizontal
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                data: new_user_vertical,
                type: 'line',
                areaStyle: {},
                smooth: true
            }]
        };

        myChart.setOption(option, true);
        window.onresize = myChart.resize;




        var data_message = {$data_message};

        var message_user_horizontal = [];
        var message_user_vertical   = [];

        for (var i = 0; i < data_message.length; i++)
        {
            message_user_horizontal.push(data_message[i].date);
            message_user_vertical.push(data_message[i].number);
        }

        var myChartMessage = echarts.init(document.getElementById('table_message_user'), 'light');

        var optionMessage = {
            title: {
                text: '咨询客户数量'
            },
            tooltip : {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    label: {
                        backgroundColor: '#6a7985'
                    }
                }
            },
            xAxis: {
                type: 'category',
                // boundaryGap: false,
                data: message_user_horizontal
            },
            yAxis: {
                type: 'value'
            },
            series: [{
                data: message_user_vertical,
                type: 'line',
                areaStyle: {},
                smooth: true
            }]
        };

        myChartMessage.setOption(optionMessage, true);
        window.onresize = myChartMessage.resize;


        $('.table_new_user_7').click(function () {
            var data_new2 = data_new.slice(-7);

            getNewTableNewUser(data_new2);
        });

        $('.table_new_user_15').click(function () {
            var data_new2 = data_new.slice(-15);

            getNewTableNewUser(data_new2);
        });
        $('.table_new_user_30').click(function () {
            var data_new2 = data_new;

            getNewTableNewUser(data_new2);
        });

        $('.table_message_user_7').click(function () {
            var data_message2 = data_message.slice(-7);

            getNewTableMessageUser(data_message2);
        });

        $('.table_message_user_15').click(function () {
            var data_message2 = data_message.slice(-15);

            getNewTableMessageUser(data_message2);
        });
        $('.table_message_user_30').click(function () {
            var data_message2 = data_message;

            getNewTableMessageUser(data_message2);
        });

        function getNewTableNewUser (data_new2) {
            var new_user_horizontal = [];
            var new_user_vertical   = [];

            for (var i = 0; i < data_new2.length; i++)
            {
                new_user_horizontal.push(data_new2[i].date);
                new_user_vertical.push(data_new2[i].number);
            }

            option = {
                title: {
                    text: '新增用户数量'
                },
                tooltip : {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                xAxis: {
                    type: 'category',
                    data: new_user_horizontal
                },
                yAxis: {
                    type: 'value'
                },
                series: [{
                    data: new_user_vertical,
                    type: 'line',
                    areaStyle: {},
                    smooth: true
                }]
            };
            myChart.setOption(option, true);
        }
        function getNewTableMessageUser (data_message2) {
            var message_user_horizontal = [];
            var message_user_vertical   = [];

            for (var i = 0; i < data_message2.length; i++)
            {
                message_user_horizontal.push(data_message2[i].date);
                message_user_vertical.push(data_message2[i].number);
            }

            optionMessage = {
                title: {
                    text: '咨询客户数量'
                },
                tooltip : {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        label: {
                            backgroundColor: '#6a7985'
                        }
                    }
                },
                xAxis: {
                    type: 'category',
                    // boundaryGap: false,
                    data: message_user_horizontal
                },
                yAxis: {
                    type: 'value'
                },
                series: [{
                    data: message_user_vertical,
                    type: 'line',
                    areaStyle: {},
                    smooth: true
                }]
            };
            myChartMessage.setOption(optionMessage, true);
        }






        var data_int = {$data_int};
        // console.log(data_int);
        var myChartInt = echarts.init(document.getElementById('table_int_user'), 'light');

        var optionInt = {
            title: {
                text: '客户兴趣占比'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b}: {c} ({d}%)"
            },
            legend: {
                orient: 'vertical',
                x: 'right',
                data:['对公司感兴趣','对产品感兴趣','对员工感兴趣']
            },
            series: [
                {
                    name:'客户兴趣占比',
                    type:'pie',
                    radius: ['50%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        normal: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            show: true,
                            textStyle: {
                                fontSize: '30',
                                fontWeight: 'bold'
                            }
                        }
                    },
                    labelLine: {
                        normal: {
                            show: false
                        }
                    },
                    data:[
                        {value:data_int.company.number, name:'对公司感兴趣'},
                        {value:data_int.goods.number, name:'对产品感兴趣'},
                        {value:data_int.staff.number, name:'对员工感兴趣'},
                    ]
                }
            ]
        };

        myChartInt.setOption(optionInt, true);
        window.onresize = myChartInt.resize;







        var data_user_power = {$data_user_power};

        var user_power = [];
        var user_name = [];

        for (var i = 0; i < data_user_power.list.length; i++)
        {
            var tmpData = data_user_power.list[i].value;
            var tmp = [tmpData.client.value, tmpData.active.value, tmpData.website.value, tmpData.product.value, tmpData.interaction.value, tmpData.charm.value];
            var tmpObj = {
                value: tmp,
                name: data_user_power.list[i].info.name
            };
            user_power.push(tmpObj);
            user_name.push(data_user_power.list[i].info.name);
            if (i == 2)
            {
                break;
            }
        }



        var myChart2 = echarts.init(document.getElementById('table_user_power'), 'light');

        var option2 = {
            tooltip: {},
            legend: {
                data: user_name,
                x: 'right'
            },
            radar: {
                // shape: 'circle',
                name: {
                    textStyle: {
                        color: '#fff',
                        backgroundColor: '#999',
                        borderRadius: 3,
                        padding: [3, 5]
                    }
                },
                indicator: [
                    { name: '获客能力值', max: data_user_power.max.client},
                    { name: '销售主动性', max: data_user_power.max.active},
                    { name: '官网推广度', max: data_user_power.max.website},
                    { name: '产品推广值', max: data_user_power.max.product},
                    { name: '客户互动值', max: data_user_power.max.interaction},
                    { name: '个人魅力值', max: data_user_power.max.charm}
                ]
            },
            series: [{
                name: '',
                type: 'radar',
                // areaStyle: {normal: {}},
                data : user_power,
            }]
        };

        myChart2.setOption(option2);
        window.onresize = myChart2.resize;
    })
</script>

</body>
</html>