{template 'common/header'}
<style>
.select_one_b{display: block; margin-bottom:5px;}
.hide{display: none;}
.label-xcx{background: #605AB0}
</style>
<ul class="nav nav-tabs">
    <li {if $op == 'display'}class="active"{/if}><a href="{php echo $this->createWebUrl('multi', array('op' => 'display'))}">管理多栏目</a></li>
    <li {if $op == 'post'}class="active"{/if}><a href="{php echo $this->createWebUrl('multi', array('op' => 'post'))}">添加多栏目</a></li>
    <li {if $op == 'mulitelist'}class="active"{/if}><a href="{php echo $this->createWebUrl('multi', array('op' => 'mulitelist'))}">管理筛选条件</a></li>
    <li {if $op == 'posts'}class="active"{/if}><a href="{php echo $this->createWebUrl('multi', array('op' => 'posts'))}">添加筛选条件</a></li>
</ul>
{if $op == 'display'}
<form class="form-horizontal" action="" method="post">
    <table class="table we7-table table-hover article-list vertical-middle">
        <tr>
            <td style="width:100px">ID</td>
            <td>栏目名称</td>
            <td>状态/参数</td>
            <td class="text-right">操作</td>
        </tr>
        {loop $listAll $cateP}
        <tr>
            <td>
                {$cateP['id']}
            </td>
            <td>
                <strong>{$cateP['name']}</strong>
            </td>
            <td>
                {if $cateP['statue']==1}
                    <span class='label label-success'>启</span>
                {else}
                    <span class='label label-danger'>关</span>
                {/if}
                {if $cateP['type']=='page'}
                    <span class='label label-danger'>栏目单页面</span>
                {elseif $cateP['type']=='showArt'}
                    <span class='label label-success'>【内容】文章</span>
                {elseif $cateP['type']=='showPic'}
                    <span class='label label-warning'>【内容】组图</span>
                {elseif $cateP['type']=='showPro'}
                    <span class='label label-primary'>【内容】商品</span>
                {/if}
                {if $cateP['list_style']==1}
                    <span class='label label-info'>单行大图</span>
                {elseif $cateP['list_style']==2}
                    <span class='label label-info'>两列图片</span>
                {elseif $cateP['list_style']==3}
                    <span class='label label-info'>单行图文</span>
                {elseif $cateP['list_style']==5}
                    <span class='label label-info'>三列图片</span>
                {elseif $cateP['list_style']==6}
                    <span class='label label-info'>四列图片</span>
                {elseif $cateP['list_style']==7}
                    <span class='label label-info'>五列图片</span>
                {elseif $cateP['list_style']==4}
                    <span class='label label-info'>文字列表</span>
                <!--下面是针对产品的-->
                {elseif $cateP['list_style']==11}
                    <span class='label label-info'>单列产品</span>
                {elseif $cateP['list_style']==12}
                    <span class='label label-info'>两列产品</span>
                {elseif $cateP['list_style']==13}
                    <span class='label label-info'>三列产品</span>
                {elseif $cateP['list_style']==14}
                    <span class='label label-info'>四列产品</span>
                {elseif $cateP['list_style']==15}
                    <span class='label label-info'>五列产品</span>
                {elseif $cateP['list_style']==19}
                    <span class='label label-info'>横排产品</span>
                {/if}
            </td>
            <td class="text-right">
                <a class="btn btn-default btn-sm" href="{php echo $this->createWeburl('multi', array('id' => $cateP['id'], 'op' =>'post'))}" >编辑</a>
                <a class="btn btn-default btn-sm" onclick="return confirm('此操作不可恢复，确认吗？'); return false;" href="{php echo $this->createWeburl('multi', array('id' => $cateP['id'], 'op' => 'delete'))}">删除</a>
            </td>
        </tr>
            {loop $cateP['data'] $cate}
                <tr>
                    <td>
                        {$cate['num']}
                    </td>
                    <td style="width: 100px">
                        <img src="{media $cate['catepic']}" width="50px" alt="">
                    </td>
                    <td>
                        &nbsp;&nbsp;{$cate['id']}--{$cate['name']}
                    </td>
                    <td>
                        {if $cate['statue']==1}
                            <span class='label label-success'>启</span>
                        {else}
                            <span class='label label-danger'>启</span>
                        {/if}
                        {if $cate['type']=='page'}
                            <span class='label label-danger'>栏目单页面</span>
                        {elseif $cate['type']=='showArt'}
                            <span class='label label-success'>【内容】文章</span>
                        {elseif $cate['type']=='showPic'}
                            <span class='label label-warning'>【内容】组图</span>
                        {elseif $cate['type']=='showPro'}
                            <span class='label label-primary'>【内容】商品</span>
                        {elseif $cate['type']=='showWxapps'}
                            <span class='label label-xcx'>【内容】小程序</span>
                        {/if}
                        {if $cate['list_style']==1}
                            <span class='label label-info'>单行大图</span>
                        {elseif $cate['list_style']==2}
                            <span class='label label-info'>两列图片</span>
                        {elseif $cate['list_style']==5}
                            <span class='label label-info'>三列图片</span>
                        {elseif $cate['list_style']==6}
                            <span class='label label-info'>四列图片</span>
                        {elseif $cate['list_style']==7}
                            <span class='label label-info'>五列图片</span>
                        {elseif $cate['list_style']==3}
                            <span class='label label-info'>单行图文</span>
                        {elseif $cate['list_style']==4}
                            <span class='label label-info'>文字列表</span>
                        <!--下面是针对产品的-->
                        {elseif $cate['list_style']==11}
                            <span class='label label-info'>单列产品</span>
                        {elseif $cate['list_style']==12}
                            <span class='label label-info'>两列图片</span>
                        {elseif $cate['list_style']==13}
                            <span class='label label-info'>单行图文</span>
                        {elseif $cate['list_style']==19}
                            <span class='label label-info'>横排产品</span>
                        {elseif $cate['list_style']==4}
                            <span class='label label-info'>文字列表</span>
                        {/if}
                    </td>
                    <td class="text-right">
                        <a class="btn btn-default btn-sm" href="{php echo $this->createWeburl('multi', array('id' => $cate['id'], 'op' =>'post'))}" >编辑</a>
                        <a class="btn btn-default btn-sm" onclick="return confirm('此操作不可恢复，确认吗？'); return false;" href="{php echo $this->createWeburl('multi', array('id' => $cate['id'], 'op' => 'delete'))}">删除</a>
                    </td>
                </tr>
            {/loop}
        {/loop}
    </table>
</form>
{elseif $op == 'mulitelist'}
<table class="table we7-table table-hover article-list vertical-middle">
    <tr>
        <td style="width:100px">排序</td>
        <td>分类名称</td>
        <td>筛选条件</td>
        <td class="text-right">操作</td>
    </tr>
    {loop $list $v}
    <tr>
        <td>{$v['sort']}</td>
        <td>{$v['varible']}</td>
        <td>{$v['content']}</td>
        <td>
            <a class="btn btn-default btn-sm" href="{php echo $this->createWebUrl('multi', array('op' => 'editmultis','id' => $v['id']))}">编辑</a>
            <a class="btn btn-danger btn-sm" onclick="return confirm('此操作不可恢复，确认吗？'); return false;" href="{php echo $this->createWebUrl('multi', array('op' => 'delmultis','id' => $v['id']))}">删除</a>
        </td>
    </tr>
    {/loop}
</table>
{elseif $op == 'editmultis'}
<form class="form-horizontal" action="" method="post">
    <div class="alert alert-success" role="alert">
        <p>内容模型：</p>
        <p>【内容】文章：可以添加普通新闻、带视频的内页。</p>
        <p>【内容】组图：可添加组图、适用于多图展示（婚纱摄影内页、荣誉资质页面）</p>
        <p>【内容】商品：可添加商品，在线购买，到店核销。</p>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">内容</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">名称</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;">
                    <input type="text" name="varible" id="varible" value="{$list['varible']}" style="width: 100px" class="form-control ng-pristine ng-untouched ng-valid ng-empty"  placeholder="" autocomplete="off">
                </div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">启用</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;">
                    <label style="margin-right: 20px">
                        <input type="radio" name="status" value="1" {if $list['status'] == '1'} checked{/if} />
                        启用
                    </label>
                    <label style="margin-right: 20px">
                        <input type="radio" name="status" value="0" {if $list['status'] == '0'} checked{/if} />
                        不启用
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block">启用后方可生效</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">筛选条件</label>
                <div class="form-controls col-sm-6" style="padding-right: 30px;">
                    <div class="lines">
                        {loop $sons $v}
                        <label style="margin-right: 20px">
                            <input type="checkbox" name="ids[]" value="{$v['id']}" checked readonly>
                            <input type="text" name="varibles[]" value="{$v['varible']}">
                        </label>
                        {/loop}
                    </div>
                    <br/>
                    <br/>
                    <br/>
                    <button type="button" onclick="addline()">添加</button>
                </div>
            </div>
            <script>
                function addline() {
                    var html = '<label style="margin-right: 20px">\n' +
                        '<input type="checkbox" name="ids[]" value="0" checked>\n' +
                        '<input type="text" name="varibles[]" value="">\n' +
                        '</label>';
                    $(".lines").append(html);
                }
            </script>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px"></label>
                <div class="form-controls col-sm-6" style="padding-right: 30px;">
                    <input type="hidden" name="id" value="<?php echo $list['id'] ?>">
                    <button type="submit">保存</button>
                </div>
            </div>
        </div>
    </div>
</form>
{elseif $op == 'posts'}
<form class="form-horizontal" action="" method="post">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">筛选条件</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">排序</label>
                <div class="form-controls col-sm-6" style="padding-right: 30px;">
                    <input type="text" name="sort" id="num" value="{$item['sort']}" style="width: 100px" class="form-control ng-pristine ng-untouched ng-valid ng-empty"  placeholder="" autocomplete="off">
                </div>
                <div class="form-controls col-sm-2 help-block">序号越大越靠前</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">名称</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;">
                    <input type="text" name="name" id="name" value="{$item['name']}" style="width: 100px" class="form-control ng-pristine ng-untouched ng-valid ng-empty"  placeholder="" autocomplete="off">
                </div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">启用</label>
                <div class="form-controls col-sm-6" style="padding-right: 30px;">
                    <label style="margin-right: 20px">
                        <input type="radio" name="status" value="1" {if $item['status'] == '1'} checked{/if} />
                        启用
                    </label>
                    <label style="margin-right: 20px">
                        <input type="radio" name="status" value="0" {if $item['status'] == '0'} checked{/if} />
                        不启用
                    </label>
                </div>
                <div class="form-controls col-sm-2 help-block">启用后方可生效</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">筛选条件</label>
                <div class="form-controls col-sm-6" style="padding-right: 30px;">
                    <textarea name="content" class="form-control" id=""></textarea>
                </div>
                <div class="form-controls col-sm-2 help-block">如：写字楼,商铺,住房（请用英文,隔开）</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px"></label>
                <div class="form-controls col-sm-6" style="padding-right: 30px;">
                    <button type="submit">保存</button>
                </div>
            </div>
        </div>
    </div>
</form>
{elseif $op == 'post'}
<form class="form-horizontal" action="" method="post">
    <div class="alert alert-success" role="alert">
        <p>内容模型：</p>
        <p>【内容】文章：可以添加普通新闻、带视频的内页。</p>
        <p>【内容】组图：可添加组图、适用于多图展示（婚纱摄影内页、荣誉资质页面）</p>
        <p>【内容】商品：可添加商品，在线购买，到店核销。</p>
    </div>
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">栏目基础内容</h3>
        </div>
        <div class="panel-body">
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">启用</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;">
                    <label style="margin-right: 20px">
                        <input type="radio" name="statue" value="1" {if $item['statue'] == '1'} checked{/if} />
                        启用
                    </label>
                    <label style="margin-right: 20px">
                        <input type="radio" name="statue" value="0" {if $item['statue'] == '0'} checked{/if} />
                        不启用
                    </label>
                </div>
                <div class="form-controls col-sm-4 help-block">启用后，多栏目其他设置方可生效</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">内容模型</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;{if $item['type'] !=''}display:none{/if}">
                    <select name="type" class="form-control"  id="catetype" onchange="change_catetype(this)">
                        <option value="" >--请选择--</option>
                        <option value="showArt" {if $item['type']=='showArt'}selected{/if} >【内容】文章</option>
                        <option value="showPic" {if $item['type']=='showPic'}selected{/if} >【内容】组图</option>
                        <option value="showPro" {if $item['type']=='showPro'}selected{/if} >【内容】商品</option>
                    </select>
                </div>
                <div class="form-controls col-sm-5" style="padding-right: 30px;{if $item['type'] ==''}display:none{/if}">
                    {if $item['type']=='showArt'}【内容】文章{/if}{if $item['type']=='showPic'}【内容】组图{/if}{if $item['type']=='showPro'}【内容】商品{/if}
                </div>
                <div class="form-controls col-sm-4 help-block" style="color: #c00">选择后无法修改，请看上方绿色提示！</div>
            </div>
            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">多栏目名称</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;">
                    <input type="text" name="name" value="{$item['name']}" class="form-control ng-pristine ng-untouched ng-valid ng-empty"  placeholder="" autocomplete="off">
                </div>
                <div class="form-controls col-sm-4 help-block">栏目中文名称</div>
            </div>

            <div class="form-group">
                <label for="" class="control-label col-sm-2" style="margin-right:45px">筛选顶级栏目</label>
                <div class="form-controls col-sm-5" style="padding-right: 30px;">
                    {loop $top_catat $vv}
                    <label for="{$vv['varible']}"><input type="checkbox" id="{$vv['varible']}" name="top_cats[]" value="{$vv['id']}" <?php if(in_array($vv['id'],explode(',',$item['top_catas']))){echo 'checked';} ?>>{$vv['varible']}</label>
                    {/loop}
                </div>
                <div class="form-controls col-sm-4 help-block">多选顶级栏目</div>
            </div>
        </div>
    </div>
    <div class="panel panel-default" id="cate_d">
        <div class="panel-heading">
            <h3 class="panel-title">栏目自定义样式</h3>
        </div>
        <div class="panel-body">
            <div class="form-group list_pic" {if $item['type'] =='showPro' ||  $item['type'] =='page'}style="display: none"{/if}>
            <label for="" class="control-label col-sm-2" style="margin-right:45px">列表板块样式</label>
            <div class="form-controls col-sm-5">
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="1" {if $item['list_style'] == '1'} checked{/if} />单行大图
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="2" {if $item['list_style'] == '2'} checked{/if} />两列图片
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="5" {if $item['list_style'] == '5'} checked{/if} />三列图片
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="6" {if $item['list_style'] == '6'} checked{/if} />四列图片
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="7" {if $item['list_style'] == '7'} checked{/if} />五列图片
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="8" {if $item['list_style'] == '8'} checked{/if} />单行图文、带简介
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="3" {if $item['list_style'] == '3'} checked{/if} />单行图文、带简介、时间、阅读量
                </label>
                <label class="select_one_b">
                    <input type="radio" name="list_style" value="4" {if $item['list_style'] == '4'} checked{/if} />纯标题样式
                </label>
            </div>
            <div class="col-sm-1"></div>
            <div class="form-controls col-sm-4 help-block">栏目列表不支持纯标题样式</div>
        </div>
        <div class="form-group list_pro" {if $item['type'] !='showPro'}style="display: none"{/if}>
        <label for="" class="control-label col-sm-2" style="margin-right:45px">产品列表板块样式</label>
        <div class="form-controls col-sm-5">
            <label class="select_one_b">
                <input type="radio" name="list_style" value="11" {if $item['list_style'] == '11'} checked{/if} />单列产品
            </label>
            <label class="select_one_b">
                <input type="radio" name="list_style" value="12" {if $item['list_style'] == '12'} checked{/if} />两列产品
            </label>
            <label class="select_one_b">
                <input type="radio" name="list_style" value="13" {if $item['list_style'] == '13'} checked{/if} />三列产品
            </label>
            <label class="select_one_b">
                <input type="radio" name="list_style" value="14" {if $item['list_style'] == '14'} checked{/if} />四列产品
            </label>
            <label class="select_one_b">
                <input type="radio" name="list_style" value="15" {if $item['list_style'] == '15'} checked{/if} />五列产品
            </label>
            <label class="select_one_b">
                <input type="radio" name="list_style" value="19" {if $item['list_style'] == '19'} checked{/if} />产品带介绍
            </label>
        </div>
        <div class="col-sm-1"></div>
        <div class="form-controls col-sm-4 help-block">请选择产品列表板块样式</div>
    </div>
    <div class="form-group" {if $item['type'] =='page'}style="display: none"{/if}>
    <label for="" class="control-label col-sm-2" style="margin-right:45px">板块标题样式</label>
    <div class="form-controls col-sm-5">
        <label class="select_one_b">
            <input type="radio" name="list_stylet" value="tl" {if $item['list_stylet'] == 'tl'} checked{/if} />【无背景】标题左对齐
        </label>
        <label class="select_one_b">
            <input type="radio" name="list_stylet" value="tc" {if $item['list_stylet'] == 'tc'} checked{/if} />【无背景】标题居中下方
        </label>
        <label class="select_one_b">
            <input type="radio" name="list_stylet" value="tlb" {if $item['list_stylet'] == 'tlb'} checked{/if} />【透明背景】标题左对齐底部
        </label>
        <label class="select_one_b">
            <input type="radio" name="list_stylet" value="tcb" {if $item['list_stylet'] == 'tcb'} checked{/if} />【透明背景】标题居中底部
        </label>
        <label class="select_one_b">
            <input type="radio" name="list_stylet" value="none" {if $item['list_stylet'] == 'none'} checked{/if} />不显示标题
        </label>
    </div>
    <div class="form-controls col-sm-4 help-block">单行图文默认左对齐</div>
    </div>
    </div>
    </div>
    <div class="form-group">
        <div class="col-sm-12">
            <input name="token" type="hidden" value="{$_W['token']}" />
            <input type="submit" class="btn btn-primary col-lg-1" name="submit" value="提交" />
        </div>
    </div>
</form>
<script>
    function change_catetype(me){
        var val = $(me).val();
        var p1=$('#catetype').children('option:selected').val();
        if(p1 == 'page'){
            $('#page_con').show();
            $('#cate_d').hide();
            $('.cate_pic').hide();
            $('.cate_art').hide();
            $('.list_pro').hide();
        }else if(p1 == 'showPro'){
            $('.list_pro').show();
            $('#cate_d').show();
            $('.list_pic').hide();
            $('.cate_art').hide();
            $('.cate_pic').hide();
            $('#page_con').hide();
        }else if(p1 == 'showArt'  || p1 == 'showWxapps'){
            $('.cate_art').show();
            $('.cate_pic').hide();
            $('#cate_d').show();
            $('.list_pic').show();
            $('.list_pro').hide();
            $('#page_con').hide();
        }else if(p1 == 'showPic'){
            $('.cate_pic').show();
            $('.cate_art').hide();
            $('#cate_d').show();
            $('.list_pic').show();
            $('.list_pro').hide();
            $('#page_con').hide();
        }
    }
</script>
{/if}
{template 'common/footer'}